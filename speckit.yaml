# SpecKit-compliant project manifest
metadata:
  version: "1.0.0"
  created: "2025-10-12"
  updated: "2025-10-29"
  status: "design_complete"
  current_feature: "002-production-ci-cd"
  
project:
  name: Local-RAG-Edge-LLM
  description: "CPU-first RAG system for privacy-focused local inference on Pi5/AMD64"
  owners:
    - name: Peenak Inamdar
      role: Product/Engineering
      email: peenaki@example.com
  language: python
  runtime: "Python 3.11+"
  
  # Core project goals and constraints
  goals:
    - Portable, offline RAG system with local LLM inference
    - Intelligent content management with source-aware change detection
    - Cross-platform support (Pi5 ARM64, AMD64)
    - CPU-first approach with llama-cpp-python
    - Single-command APT package installation
    - Privacy-first design with no cloud dependencies
    - Efficient update detection using dual hash strategy (source + content)
    - Cross-source deduplication with metadata preservation
    
  non_goals:
    - Cloud inference or remote model hosting
    - Hardware-specific acceleration (NPU/GPU) in v1
    - Multi-user or enterprise authentication
    - Real-time collaboration features
    - Container-based deployment

# Project constitution and governance
constitution: .specify/memory/constitution.md

# Documentation structure (SpecKit-compliant)
docs:
  # Core SpecKit artifacts (current feature: 002-production-ci-cd)
  spec: specs/002-production-ci-cd/spec.md
  plan: specs/002-production-ci-cd/plan.md
  tasks: specs/002-production-ci-cd/tasks.md
  research: specs/002-production-ci-cd/research.md
  data_model: specs/002-production-ci-cd/data-model.md
  quickstart: specs/002-production-ci-cd/quickstart.md
  contracts: specs/002-production-ci-cd/contracts/
  
  # Completed features (archived)
  mvp_spec: specs/001-local-rag-mvp/spec.md
  mvp_plan: specs/001-local-rag-mvp/plan.md
  mvp_tasks: specs/001-local-rag-mvp/tasks.md
  mvp_research: specs/001-local-rag-mvp/research.md
  mvp_data_model: specs/001-local-rag-mvp/data-model.md
  mvp_quickstart: specs/001-local-rag-mvp/quickstart.md
  mvp_contracts: specs/001-local-rag-mvp/contracts/
  
  # Legacy documentation (archived for reference)
  legacy_problem: specs/01_problem.md
  legacy_requirements: specs/02_requirements.md
  legacy_design: specs/03_design.md
  legacy_milestones: specs/04_milestones.md
  legacy_risks: specs/05_risks.md
  legacy_configuration: specs/06_configuration.md
  legacy_content_strategy: specs/07_content_strategy.md
  legacy_testing_strategy: specs/08_testing_strategy.md
  legacy_deployment: specs/09_deployment.md
  legacy_architecture_decisions: specs/10_architecture_decisions.md
  legacy_ci_cd_automation: specs/11_ci_cd_automation.md

# Task management
tasks: specs/002-production-ci-cd/tasks.md

# Development workflow
ci:
  lint: "ruff check ."
  test: "pytest -q"
  coverage: "pytest --cov=src/guide --cov-report=term-missing"
  
# Target environments
environments:
  development:
    description: "Local development with Python virtual environment"
    setup: "python3 -m venv .venv && source .venv/bin/activate && pip install -r requirements.txt"
    
  production:
    description: "Raspberry Pi 5 or AMD64 Linux with APT package"
    setup: "sudo apt install ./local-rag_1.0.0_arm64.deb"

# Technology stack
tech_stack:
  backend: "FastAPI + uvicorn"
  llm: "llama-cpp-python with GGUF models"
  vector_db: "ChromaDB (embedded SQLite)"
  embedding: "ChromaDB DefaultEmbeddingFunction"
  content_management: "Dual hash strategy (source + content)"
  change_detection: "File mtime, HTTP etag/last-modified headers"
  packaging: "Debian APT packages"
  service_management: "systemd"
  cli: "Rich terminal interface"
  
# Quality gates and acceptance criteria  
quality:
  performance:
    pi5_cold_start: "3-5 minutes for first token"
    pi5_warm_query: "1-3 minutes for first token"
    amd64_reference: "sub-second to 30 seconds"
    update_check: "30 seconds for 100+ sources"
  
  content_management:
    change_detection_accuracy: "100% for file mtime and HTTP etag changes"
    deduplication_accuracy: "100% for identical content across sources"
    update_efficiency: "Only changed content re-processed"
  
  resource_limits:
    ram_minimum: "6GB (Pi5)"
    ram_recommended: "8GB"
    storage_minimum: "32GB total (8GB app + 4GB model + 20GB content)"
    
  reliability:
    uptime_target: "99%+ during normal operation"
    installation_time: "under 5 minutes on clean Pi5"
    test_coverage: ">85% for core modules"
    data_integrity: "Survive power loss without corruption"
